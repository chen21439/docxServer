<div id="rightDlg"
     style="display:none; position:fixed; right:0; top:0;
            width:360px; height:100vh;
            background:#fff; border-left:1px solid #ddd;
            box-shadow: -2px 0 5px rgba(0,0,0,0.1);
            overflow:hidden; z-index:9999;">

  <!-- 头部 -->
  <div style="padding:12px; border-bottom:1px solid #e0e0e0; background:#f5f5f5;">
    <div style="display:flex; justify-content:space-between; align-items:center;">
      <div style="font-weight:600; font-size:16px;">AI问答助手</div>
      <button onclick="document.getElementById('rightDlg').style.display='none'"
              style="border:none; background:transparent; font-size:20px; cursor:pointer;">×</button>
    </div>
  </div>

  <!-- 选中文本展示区 -->
  <div id="selectedTextArea" style="padding:12px; max-height:200px; overflow-y:auto; background:#fffef0; border-bottom:1px solid #e0e0e0;">
    <div style="font-size:12px; color:#666; margin-bottom:8px;">选中的文本：</div>
    <div id="selectedTextContent" style="background:#ffff00; padding:8px; border-radius:4px; font-size:14px; line-height:1.5;">
      <!-- 选中的文本将显示在这里 -->
    </div>
  </div>

  <!-- 对话区域 -->
  <div id="chatArea" style="flex:1; padding:12px; overflow-y:auto; height:calc(100vh - 280px);">
    <div id="chatMessages">
      <!-- 对话消息将显示在这里 -->
    </div>
  </div>

  <!-- 输入区域 -->
  <div style="position:absolute; bottom:0; left:0; right:0; padding:12px; border-top:1px solid #e0e0e0; background:#fff;">
    <div style="display:flex; gap:8px;">
      <textarea id="aiInput"
                placeholder="请输入您的问题..."
                style="flex:1; min-height:60px; padding:8px; border:1px solid #ddd; border-radius:4px; resize:none; font-family:inherit;">
      </textarea>
      <button id="aiSendBtn"
              style="padding:8px 16px; background:#007bff; color:white; border:none; border-radius:4px; cursor:pointer; white-space:nowrap;">
        发送
      </button>
    </div>
  </div>
</div>